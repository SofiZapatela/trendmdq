<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Detalle Producto</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Tu CSS y recursos aquÃ­ -->
</head>
<body>

  <div id="producto-detalle" style="max-width: 800px; margin: auto; padding: 20px;">
    <h1 id="titulo"></h1>
    <img id="imagen" src="" alt="" style="max-width: 100%; border-radius: 8px;" />
    <p id="descripcion"></p>
    <p><strong>Precio: $<span id="precio"></span></strong></p>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    // Config Firebase (mismo que en CMS y index)
    const firebaseConfig = {
      apiKey: "AIzaSyAMYXqevFiswKZVICllkDVq2ymj6EgBn6I",
      authDomain: "trendmdq-4e495.firebaseapp.com",
      projectId: "trendmdq-4e495",
      storageBucket: "trendmdq-4e495.appspot.com",
      messagingSenderId: "866820424354",
      appId: "1:866820424354:web:548df9c9c21a881a354dfb"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Leer el slug de la URL (?slug=blusa-amalfi)
    const urlParams = new URLSearchParams(window.location.search);
    const slug = urlParams.get('slug');

    if (!slug) {
      document.getElementById('producto-detalle').innerHTML = "<p>Producto no especificado</p>";
    } else {
      // Primero buscar en 'productos'
      db.collection('productos').doc(slug).get().then(doc => {
        if (doc.exists) {
          mostrarProducto(doc.data());
        } else {
          // Si no existe en productos, buscar en tejidos
          db.collection('tejidos').doc(slug).get().then(doc2 => {
            if (doc2.exists) {
              mostrarProducto(doc2.data());
            } else {
              document.getElementById('producto-detalle').innerHTML = "<p>Producto no encontrado</p>";
            }
          });
        }
      });
    }

    function mostrarProducto(p) {
      document.getElementById('titulo').textContent = p.titulo || p.nombre || "";
      document.getElementById('descripcion').textContent = p.desc || p.descripcion || "";
      document.getElementById('precio').textContent = p.precio || "";
      document.getElementById('imagen').src = p.img || p.imagen || "";
      document.getElementById('imagen').alt = p.titulo || p.nombre || "Imagen producto";
    }
  </script>

</body>
</html>
