<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Subir Imagen a Firebase Storage</title>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
</head>
<body>

  <h2>Subir imagen a Firebase Storage</h2>
  <input type="file" id="fileInput" />
  <button id="uploadBtn">Subir imagen</button>

  <h3>Imagen subida:</h3>
  <img id="imgPreview" src="" alt="" style="max-width:300px; display:none;" />

  <script>
    // Config Firebase (tu configuración real)
    const firebaseConfig = {
      apiKey: "AIzaSyAMYXqevFiswKZVICllkDVq2ymj6EgBn6I",
      authDomain: "trendmdq-4e495.firebaseapp.com",
      projectId: "trendmdq-4e495",
      storageBucket: "trendmdq-4e495.firebasestorage.app",
      messagingSenderId: "866820424354",
      appId: "1:866820424354:web:548df9c9c21a881a354dfb"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    const fileInput = document.getElementById("fileInput");
    const uploadBtn = document.getElementById("uploadBtn");
    const imgPreview = document.getElementById("imgPreview");

    uploadBtn.onclick = () => {
      const file = fileInput.files[0];
      if (!file) {
        alert("Selecciona un archivo primero");
        return;
      }

      // Crear referencia en Storage (carpeta 'imagenes/')
      const storageRef = storage.ref("imagenes/" + Date.now() + "-" + file.name);

      // Subir archivo
      storageRef.put(file)
        .then(() => storageRef.getDownloadURL())
        .then(url => {
          imgPreview.src = url;
          imgPreview.style.display = "block";
          alert("Imagen subida correctamente!");
          console.log("URL pública:", url);
        })
        .catch(err => {
          console.error("Error subiendo imagen:", err);
          alert("Error subiendo la imagen");
        });
    };
  </script>

</body>
</html>
